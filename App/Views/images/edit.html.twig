{% extends "base.html.twig" %}

{% block title %}Modification{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css"
          integrity="sha256-p6xU9YulB7E2Ic62/PX+h59ayb3PBJ0WFTEQxq0EjHw=" crossorigin="anonymous"/>
{% endblock %}
{% block body %}
    <div class="container-fluid pt-5">
        <h1 class="text-center">{{ url }}</h1>
        <hr class="my-4">
        <form id="formImage" class="container-fluid">
            {{ form|raw }}
        </form>
        {#        <div id="result"></div>#}
    </div>
{% endblock %}
{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"
            integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $('#formTabs').tabs();
        $('#formImage').on('submit', function (e) {
            e.preventDefault();
            let formData = new FormData(this);
            formData.append("SourceFile", "{{ path }}");

            $.ajax({
                url: '/devoir-idc2019/ajax/edit',
                method: 'post',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                success: function (data) {
                    // $("#result").html(data);
                    window.location = '/devoir-idc2019/';
                }
            })
        });
    </script>
{% endblock %}